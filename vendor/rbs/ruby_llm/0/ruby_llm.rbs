module RubyLLM
  class Chat
    def messages: () -> ::Array[Message]

    def handle_tool_calls: (Message response) ?{ () -> untyped } -> (Message | Tool::Halt)
  end

  class Message
    def role: () -> ::String

    def content: () -> ::String

    def tool_calls: () -> ::Hash[::String, ToolCall]

    def tool_call_id: () -> ::String

    def tool_call?: () -> bool

    def tool_result?: () -> bool
  end

  class ToolCall
    def name: () -> ::String

    def arguments: () -> ::Hash[::String | ::Symbol, untyped]
  end

  class Tool
    class Halt
    end
  end
end
