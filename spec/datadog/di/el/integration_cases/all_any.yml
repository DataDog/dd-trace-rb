- name: all
  ast:
    all:
      - ref: collection
      - isEmpty:
          ref: '@it'

  compiled: "all(ref('collection')) { |current_item, current_key, current_value| is_empty(current_item, '@it') }"

  eval:
    - locals:
        collection: [foo, ""]
      result: false

    - locals:
        collection: [""]
      result: true

    - name: empty collection
      locals:
        collection: []
      result: true

- name: any
  ast:
    any:
      - ref: collection
      - isEmpty:
          ref: '@it'

  compiled: "any(ref('collection')) { |current_item, current_key, current_value| is_empty(current_item, '@it') }"

  eval:
    - locals:
        collection: [foo, ""]
      result: true

    - locals:
        collection: [foo]
      result: false

    - name: empty collection
      locals:
        collection: []
      result: false

- name: "any with @key"
  ast:
    any:
      - ref: collection
      - isEmpty:
          ref: '@key'

  compiled: "any(ref('collection')) { |current_item, current_key, current_value| is_empty(current_key, '@key') }"

  eval:
    - locals:
        collection:
          "": 42
      result: true

    - locals:
        collection:
          foo: 42
      result: false

    - locals:
        collection: [1]
      # TODO reconsider - there are no keys in an array
      result: false

    - locals:
        collection: []
      result: false

- name: "any with @value"
  ast:
    any:
      - ref: collection
      - isEmpty:
          ref: '@value'

  # compiled:

  eval:
    - locals:
        collection:
          foo: ""
      result: true

    - locals:
        collection:
          foo: 42
      result: false

    - locals:
        collection: [1]
      # TODO reconsider - there are no keys in an array
      result: false

    - locals:
        collection: []
      result: false
