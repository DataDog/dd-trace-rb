- name: startsWith
  ast:
    startsWith:
      - ref: var
      - hello

  compiled: starts_with(ref('var'), ("hello"))

  eval:
    - locals:
        var: hello_
      result: true

    - locals:
        var: hel
      result: false

- name: endsWith
  ast:
    endsWith:
      - ref: var
      - hello

  compiled: ends_with(ref('var'), ("hello"))

  eval:
    - locals:
        var: _hello
      result: true

    - locals:
        var: hel
      result: false

- name: substring
  ast:
    substring:
      - ref: var
      - 4
      - 7

  compiled: substring((ref('var')), (4), (7))

  eval:
    - locals:
        var: abracadabra
      result: cad

- name: matches
  ast:
    matches:
      - ref: var
      - hello[a-z]

  compiled: matches(ref('var'), ("hello[a-z]"))

  # TODO check esscaping

  eval:
    - locals:
        var: -hellow-
      result: true

    - locals:
        var: -hello-
      result: false

    - name: nil input
      locals:
        var:
      result: false
